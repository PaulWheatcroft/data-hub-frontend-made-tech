{% extends "_layouts/search.njk" %}

{% block search_results %}
  <ol class="c-entity-list">
    {% for contact in results.contacts %}
      <li class="c-entity-list__item">
        <h3 class="c-entity-list__item-header">
          <a href="/contacts/{{ contact.id }}">
            {{ (contact.first_name + ' ' + contact.last_name) | highlight(searchTerm) }}
          </a>
        </h3>

        <dl class="metadata-list">
          {% if (contact.company) %}
            <dt class="metadata-list__term u-visually-hidden">Company</dt>
            <dd class="metadata-list__value">{{ contact.company.name | highlight(searchTerm) }}</dd>
          {% endif %}
          {% if results.job_title %}
            <dt class="metadata-list__term u-visually-hidden">Job Title</dt>
            <dd class="metadata-list__value">{{ results.job_title | highlight(searchTerm) }}</dd>
          {% endif %}

          <dt class="metadata-list__term u-visually-hidden">Address</dt>
          <dd class="metadata-list__value">
            {{ addressFormatter([
              contact.address_1,
              contact.address_2,
              contact.address_county,
              contact.address_town,
              contact.address_postcode
            ]) | highlight(searchTerm) }}
          </dd>
        </dl>
      </li>
    {% endfor %}
  </ol>
{% endblock %}
