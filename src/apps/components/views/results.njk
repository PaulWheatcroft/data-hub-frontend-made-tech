{% extends "./_layout.njk" %}

{% from "_macros/results.njk" import ResultsSummary %}

{% block body_main_content %}
  {% call Example('ResultsFilters') %}
    {{
      ResultsFilters({
        filters: [
          MultipleChoiceField({
            type: 'checkbox',
            name: 'stage',
            label: 'Stage',
            value: form.data.filters.stage,
            initialOption: 'All stages',
            options: [
              { label: 'Prospect' },
              { label: 'Assign PM' },
              { label: 'Active' }
            ],
            modifier: ['smaller', 'light']
          }),

          MultipleChoiceField({
            type: 'radio',
            name: 'investment_type',
            label: 'Investment type',
            value: form.data.filters.investment_type,
            options: [
              { label: 'Assign PM' },
              { label: 'FDI' },
              { label: 'Non-FDI' }
            ],
            initialOption: 'All types',
            modifier: ['smaller', 'light']
          }),

          MultipleChoiceField({
            name: 'sector',
            label: 'Sector',
            value: form.data.filters.sector,
            options: [
              { label: 'Advanced engineering' },
              { label: 'Automotive' },
              { label: 'Creative and media' }
            ],
            initialOption: 'All sectors',
            modifier: ['smaller', 'light']
          }),

          TextField({
            label: 'Estimated to land before',
            name: 'estimated_land_date_before',
            placeholder: 'e.g. 2018-07-18',
            hint: 'YYYY-MM-DD',
            value: form.data.filters.estimated_land_date_before,
            modifier: ['small', 'light']
          })
        ]
      })
    }}
  {% endcall %}

  {% call Example('ResultsSummary') %}
    {{
      ResultsSummary({
        el: 'header',
        count: 10,
        selectedFiltersHumanised: {
          stage: {
            label: 'Stage',
            value: 'Prospect'
          },
          investment_type: {
            label: 'Investment type',
            value: 'Assign PM'
          }
        }
      })
    }}
  {% endcall %}

  {% call Example('Results') %}
    {{
      Results(results | assign({
        sortingOptions: form.options.sortby,
        selectedFilters: form.data.filters,
        selectedSorting: form.data.sorting.sortby
      }))
    }}
  {% endcall %}
{% endblock %}
